import*as e from"@wordpress/interactivity";var r={438:e=>{e.exports=import("@wordpress/interactivity-router")}},t={};function o(e){var s=t[e];if(void 0!==s)return s.exports;var a=t[e]={exports:{}};return r[e](a,a.exports,o),a.exports}o.d=(e,r)=>{for(var t in r)o.o(r,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},o.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r);const s=(h={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store,withScope:()=>e.withScope},p={},o.d(p,h),p),a="cosmo/v1/users",n="#user-view-",l=s.getContext,i={state:{modalUserName:"",openRequests:new Map,get modal(){const{modalUser:e,isModalOpen:r,modalSelectorId:t}=l();return{element:document.getElementById(t),isOpen:r,user:e}},get baseApiUrl(){let e="/wp-json";return l().permalinksEnabled||(e="/?rest_route="),e},get hasError(){return!!l().error},get hasSingleUserError(){return!!l().singleUserError&&c.modal.isOpen},get shouldHideTable(){const{users:e}=l();return[!Array.isArray(e),0===e?.length].some(Boolean)},get shouldHideDetailsSkeleton(){return!(!c.hasError||!c.modal.isOpen)||c.modal.isOpen&&!!c.modal.user},get shouldHideUserDetails(){return!(!c.hasError||!c.modal.isOpen)||c.modal.isOpen&&!c.modal.user?.id}},actions:{async apiFetch(e,r=!1){const{request:t,abort:o}=((e,r={})=>{const t=new AbortController,{signal:o}=t;return{abort:()=>t.abort(),request:fetch(e,{...r,signal:o}).then((e=>{if(!e.ok)throw new Error(`HTTP Error: ${e.statusText}`);return e.json()})).catch((e=>{throw"AbortError"===e.name?console.log("Fetch aborted"):console.error("Fetch error:",e.message),e}))}})(e);return r&&c.openRequests.set(e,o),t.finally((()=>{r&&c.openRequests.delete(e)}))},async fetchUser(e){const r=l();return r.singleUserError="",d.apiFetch(`${c.baseApiUrl}/${a}/${e}`,!0).catch((0,s.withScope)((e=>r.singleUserError=e.message)))},async fetchAllUsers(){const e=l();return e.error="",d.apiFetch(`${c.baseApiUrl}/${a}`).then((0,s.withScope)((r=>e.users=r))).catch((0,s.withScope)((r=>e.error=r.message)))},*fetchUserAndOpenModal(e){const r=l();r?.users?.forEach((r=>{r.id===e&&(c.modalUserName=r.name)})),c.modalUserName||(c.modalUserName="..."),r.modalUser=null,d.modalOpen(),yield d.fetchUser(e).then((0,s.withScope)((t=>(d.navigate(`${n}${e}`),c.modalUserName=t.name,r.modalUser=t,t))))},*navigate(e){const{actions:r}=yield Promise.resolve().then(o.bind(o,438));yield r.navigate(e)},modalOpen(){l().isModalOpen=!0,c.modal.element?.showModal()},modalClose(){const e=l();e.isModalOpen=!1,setTimeout((0,s.withScope)((()=>{c.modal.element?.close();const{location:r}=window||{location:{origin:"",pathname:"",search:""}},t=`${r.origin}${r.pathname}${r.search}`;d.navigate(t).then((()=>{e.modalUser=null}))})),250)},handleClose(e){e.preventDefault(),d.modalClose(),c.openRequests.forEach((e=>e()))},async handleClick(e){if(e.target instanceof HTMLAnchorElement){e.preventDefault();const{ref:{dataset:{id:r}}}=(0,s.getElement)();await d.fetchUserAndOpenModal(parseInt(r))}},async handleHashChange(){const{hash:e}=window.location;if(e?.startsWith(n)){const r=parseInt(e.replace(n,""));Number.isInteger(r)&&await d.fetchUserAndOpenModal(r)}""===e&&c.modal.isOpen&&d.modalClose()}},callbacks:{*init(){yield d.handleHashChange(),yield d.fetchAllUsers()}}},{state:c,actions:d,callbacks:m}=(0,s.store)("cosmo-users/users-table",i);var h,p;