{"version":3,"file":"users-table/view.js","mappings":"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","sources":["webpack://cosmo-users/./assets/users-table/utils.ts","webpack://cosmo-users/external import \"@wordpress/interactivity-router\"","webpack://cosmo-users/external module \"@wordpress/interactivity\"","webpack://cosmo-users/webpack/bootstrap","webpack://cosmo-users/webpack/runtime/define property getters","webpack://cosmo-users/webpack/runtime/hasOwnProperty shorthand","webpack://cosmo-users/webpack/runtime/make namespace object","webpack://cosmo-users/./assets/users-table/view.ts"],"sourcesContent":["export const useFetch = <T> (url: string, options: RequestInit = {}) => {\n  const controller = new AbortController();\n  const { signal } = controller;\n\n  const request = fetch(url, {...options, signal})\n    .then((response) => {\n      if (!response.ok) {\n        throw new Error(`HTTP Error: ${response.statusText}`);\n      }\n      return response.json() as Promise<T>;\n    })\n    .catch((error) => {\n      if (error.name === 'AbortError') {\n        console.log('Fetch aborted');\n      } else {\n        console.error('Fetch error:', error.message);\n      }\n      throw error;\n    });\n\n  return {\n    abort: () => controller.abort(),\n    request,\n  };\n};\n","module.exports = import(\"@wordpress/interactivity-router\");;","module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * WordPress dependencies\n */\nimport { store, getContext, getElement, withScope } from \"@wordpress/interactivity\";\n\n/**\n * Internal dependencies\n */\nimport { useFetch } from './utils';\nimport { User, UsersContext, Modal } from './types';\n\n/**\n * Internal Constants\n */\nconst USERS_ENDPOINT = 'cosmo/v1/users';\nconst USER_HASH_PREFIX = '#user-view-';\nconst ANIMATION_SPEED = 250;\n\nconst getUserContext = getContext<UsersContext>;\n\nconst storeDef = {\n  state: {\n    modalUserName: '',\n    openRequests: new Map<string, () => void>(),\n    get modal(): Modal {\n      const {modalUser, isModalOpen, modalSelectorId} = getUserContext();\n\n      return {\n        element: document.getElementById(modalSelectorId),\n        isOpen: isModalOpen,\n        user: modalUser,\n      };\n    },\n    get baseApiUrl(): string {\n      let url = '/wp-json';\n\n      if (!getUserContext().permalinksEnabled) {\n        url = '/?rest_route=';\n      }\n\n      return url;\n    },\n    /**\n     * Provides the error message if any request is failed.\n     */\n    get hasError(): boolean {\n      return !!getUserContext().error;\n    },\n    /**\n     * Provides the error message if any request is failed to fetch a single user.\n     */\n    get hasSingleUserError(): boolean {\n      return !!getUserContext().singleUserError && state.modal.isOpen;\n    },\n    /**\n     * We hide Table when:\n     * - Users are not an array.\n     * - Users are an empty array.\n     */\n    get shouldHideTable(): boolean {\n      const {users} = getUserContext();\n\n      return [\n        !Array.isArray(users),\n        users?.length === 0\n      ].some(Boolean);\n    },\n    /**\n     * We hide Skeleton when:\n     * - We have an error.\n     * - Modal is open, and we don't have a single user yet.\n     */\n    get shouldHideDetailsSkeleton(): boolean {\n      if (state.hasError && state.modal.isOpen) {\n        return true;\n      }\n\n      return state.modal.isOpen && !!state.modal.user;\n    },\n    /**\n     * We hide User Details when:\n     * - We have an error.\n     * - Modal is open, and we don't have a single user yet.\n     */\n    get shouldHideUserDetails(): boolean {\n      if (state.hasError && state.modal.isOpen) {\n        return true\n      }\n\n      return state.modal.isOpen && !state.modal.user?.id;\n    },\n  },\n  actions: {\n    /**\n     * Makes request to the given URL.\n     * And handles the error.\n     */\n    async apiFetch(url: string, controllable: boolean = false): Promise<any> {\n      const {request, abort} = useFetch(url);\n\n      if (controllable) {\n        state.openRequests.set(url, abort);\n      }\n\n      return request.finally(\n        () => {\n          if (controllable) {\n            state.openRequests.delete(url);\n          }\n        }\n      );\n    },\n    /**\n     * Fetches a single user details by a given user id.\n     */\n    async fetchUser(id: number): Promise<User> {\n      const context = getUserContext();\n\n      context.singleUserError = '';\n\n      return actions\n        .apiFetch(`${state.baseApiUrl}/${USERS_ENDPOINT}/${id}`, true)\n        .catch(\n          withScope((error: Error) => context.singleUserError = error.message)\n        );\n    },\n    /**\n     * Fetches all users from a server.\n     */\n    async fetchAllUsers(): Promise<User[]|string> {\n      const context = getUserContext();\n\n      context.error = '';\n\n      return actions\n        .apiFetch(`${state.baseApiUrl}/${USERS_ENDPOINT}`)\n        .then(\n          withScope((users: User[]) => context.users = users)\n        )\n        .catch(\n          withScope((error: Error) => context.error = error.message)\n        );\n    },\n    /**\n     * Fetches a single user details by a given user id,\n     * and opens modal with the user details.\n     */\n    * fetchUserAndOpenModal(id: number): Generator<Promise<User|string>> {\n      const context = getUserContext();\n\n      context?.users?.forEach((user: User) => {\n        if (user.id === id) {\n          state.modalUserName = user.name;\n        }\n      });\n\n      // When we don't have a user yet, we show a loading state.\n      if (!state.modalUserName) {\n        state.modalUserName = '...';\n      }\n\n      // Reset the modal user.\n      context.modalUser = null;\n\n      // Open a modal to show a loading state.\n      actions.modalOpen();\n\n      // Fetch the user details and open the modal.\n      yield actions.fetchUser(id).then(\n        withScope((user: User): User => {\n          actions.navigate(`${USER_HASH_PREFIX}${id}`);\n          state.modalUserName = user.name;\n          context.modalUser = user;\n          return user;\n        })\n      );\n    },\n    /**\n     * Navigates to the given href.\n     */\n    * navigate(href: string) {\n      const {actions} = yield import('@wordpress/interactivity-router');\n      yield actions.navigate(href);\n    },\n    /**\n     * Opens the modal.\n     */\n    modalOpen(): void {\n      const context = getUserContext();\n\n      context.isModalOpen = true;\n\n      (state.modal.element as HTMLDialogElement)?.showModal();\n    },\n    /**\n     * Closes the modal and resets the current user as they are no longer needed.\n     */\n    modalClose(): void {\n      const context = getUserContext();\n\n      context.isModalOpen = false;\n\n      setTimeout(\n        withScope(() => {\n          (state.modal.element as HTMLDialogElement)?.close();\n\n          const {location} = window || {location: {origin: '', pathname: '', search: ''}};\n\n          // Go back to the original URL, w/o the user hash.\n          const originUrl = `${location.origin}${location.pathname}${location.search}`;\n\n          actions.navigate(originUrl).then(() => {\n            context.modalUser = null;\n          });\n        }),\n        ANIMATION_SPEED\n      )\n    },\n    /**\n     * Handles the close modal button click.\n     * Handles the close the escape key press.\n     */\n    handleClose(evt: Event): void {\n      evt.preventDefault();\n      actions.modalClose();\n\n      // On slow connections there is a possibility that the user clicks on the close button,\n      // and request a new user, so we just abort all previous requests on close modal.\n      state.openRequests.forEach((abort) => abort());\n    },\n    /**\n     * Handles the click on the user row.\n     */\n    async handleClick(evt: Event) {\n      if (evt.target instanceof HTMLAnchorElement) {\n        evt.preventDefault();\n\n        const {\n          ref: {dataset: {id}},\n        } = getElement();\n\n        await actions.fetchUserAndOpenModal(parseInt(id));\n      }\n    },\n    /**\n     * Opens/Closes the modal when the URL hash changes.\n     */\n    async handleHashChange() {\n      const {hash} = window.location;\n\n      if (hash?.startsWith(USER_HASH_PREFIX)) {\n        const userId = parseInt(hash.replace(USER_HASH_PREFIX, ''));\n\n        if (Number.isInteger(userId)) {\n          await actions.fetchUserAndOpenModal(userId);\n        }\n      }\n\n      // Close the modal when the hash is empty.\n      // E.g. when the user navigates back to the original URL.\n      if (hash === '' && state.modal.isOpen) {\n        actions.modalClose();\n      }\n    },\n  },\n  callbacks: {\n    /**\n     * When application starts up, it fetches all users from the server.\n     * If the URL hash contains a user id, it fetches the user details and opens the modal.\n     */\n    * init() {\n      yield actions.handleHashChange();\n      // Fetch all users.\n      yield actions.fetchAllUsers();\n    },\n  },\n};\n\ntype Store = typeof storeDef;\n\n/**\n * Note: Even though we don't use destructed values w/i this file, we use them inside the render.php file.\n */\nconst { state, actions, callbacks } = store< Store >( 'cosmo-users/users-table', storeDef );\n"],"names":["useFetch","url","options","controller","AbortController","signal","request","fetch","then","response","ok","Error","statusText","json","catch","error","name","console","log","message","abort","store","getContext","getElement","withScope","USERS_ENDPOINT","USER_HASH_PREFIX","ANIMATION_SPEED","getUserContext","storeDef","state","modalUserName","openRequests","Map","modal","modalUser","isModalOpen","modalSelectorId","element","document","getElementById","isOpen","user","baseApiUrl","permalinksEnabled","hasError","hasSingleUserError","singleUserError","shouldHideTable","users","Array","isArray","length","some","Boolean","shouldHideDetailsSkeleton","shouldHideUserDetails","id","actions","apiFetch","controllable","set","finally","delete","fetchUser","context","fetchAllUsers","fetchUserAndOpenModal","forEach","modalOpen","navigate","href","showModal","modalClose","setTimeout","close","location","window","origin","pathname","search","originUrl","handleClose","evt","preventDefault","handleClick","target","HTMLAnchorElement","ref","dataset","parseInt","handleHashChange","hash","startsWith","userId","replace","Number","isInteger","callbacks","init"],"sourceRoot":""}